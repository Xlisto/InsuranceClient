<div class="container">
    <h1 class="h1 text-center">Seznam ručení</h1>
    <div class="list-group rounded">
        <div class="list-group-item m-1">
            <div class="row rounded ">
                <div class="col-2">
                    <div *ngIf="client!=null">Klient:<br>
                        <span class=client>{{client.firstName}} {{client.lastName}}</span>
                    </div>
                </div>
                <div class="col-2">
                    <div *ngIf="client!=null">Adresa:<br>
                        <span class=client>{{client.street}}, {{client.houseNumber}}<span *ngIf="client.registryNumber.length >0">, {{client.registryNumber}}</span><br>
                        {{client.city}} {{client.zip}}</span>
                    </div>
                </div>
                <div class="col text-end">
                    <div class="btn-group m-1">
                        <button class="btn btn-primary" (click)="isModalNewInsuranceCarClosed = false">
                            Nové ručení</button>
                        <button class="btn btn-primary" (click)="isModalEditInsuranceCarClosed = false;"
                            [disabled]="selectedInsurance === null">Upravit ručení</button>
                        <button class="btn btn-danger" (click)="isModalRemoveInsuranceCarClosed = false"
                            [disabled]="selectedInsurance === null">Odstranit ručení</button>
                    </div>
                    <div class="btn-group m-1">
                      <button class="btn btn-primary" (click)="back()">Seznam klientů</button>  
                    </div>
                    
                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-12">
            <div class="list-group rounded">
                <button class="list-group-item btn rounded m-1" *ngFor="let insurance of insurancesCars"
                    [class.active]="selectedInsurance === insurance" (click)="selectedInsurance = this.insurance;">
                    <div class="row text-start">
                        <div class="col">Číslo:<br>{{insurance.id}}</div>
                        <div class="col">Založeno:<br>{{insurance.start | date: 'dd.MM.yyy'}}</div>
                        <div class="col">Značka:<br>{{insurance.brand}}</div>
                        <div class="col">RZ:<br>{{insurance.registrationMark}}</div>
                        <div class="col">Obsah válců:<br>{{insurance.enginePower}}</div>
                        <div class="col">Pojistné:<br>{{insurance.cost}}</div>
                    </div>

                </button>
            </div>
        </div>

    </div>
</div>

<app-modal header="Nové povinné ručení" [isClosed]="isModalNewInsuranceCarClosed"
    (crossClicked)="isModalNewInsuranceCarClosed = true; ngAfterViewInit()">
    <app-insurance-car-modify *ngIf="!isModalNewInsuranceCarClosed" [clientId]="clientId"></app-insurance-car-modify>
    <button footer type="button" class="btn btn-primary" (click)="addInsurance()">Přidat</button>
    <button footer type="button" class="btn btn-secondary" (click)="isModalNewInsuranceCarClosed = true; ngAfterViewInit()">Zavřít</button>
</app-modal>

<app-modal header="Opravit povinné ručení" [isClosed]="isModalEditInsuranceCarClosed"
    (crossClicked)="isModalEditInsuranceCarClosed = true; ngAfterViewInit()">
    <app-insurance-car-modify *ngIf="!isModalEditInsuranceCarClosed" [insuranceCar]="selectedInsurance"
        [clientId]="clientId"></app-insurance-car-modify>
    <button footer type="button" class="btn btn-primary" (click)="editInsurance()">Opravit</button>
    <button footer type="button" class="btn btn-secondary"
        (click)="isModalEditInsuranceCarClosed = true; ngAfterViewInit()">Zavřít</button>
</app-modal>

<app-modal header="Odstranit povinné ručení" [isClosed]="isModalRemoveInsuranceCarClosed"
    *ngIf="selectedInsurance != null" (crossClicked)="isModalRemoveInsuranceCarClosed = true">
    Opravdu odstarnit povinné ručení vozidla RZ: <strong>{{selectedInsurance.registrationMark}}</strong>?
    <button footer type="button" class="btn btn-primary" (click)="removeInsurance()">Odstranit</button>
    <button footer type="button" class="btn btn-secondary"
        (click)="isModalRemoveInsuranceCarClosed = true">Zavřít</button>
</app-modal>